{"version":3,"file":"date.js","sourceRoot":"","sources":["../../../src/utils/date.ts"],"names":[],"mappings":";;AAQA,SAAS,GAAG,CAAE,CAAS;IACrB,OAAO,CAAC,GAAG,EAAE;QACX,CAAC,CAAC,GAAG,GAAG,CAAC;QACT,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAA;AACf,CAAC;AAEY,QAAA,qBAAqB,GAAG,CAAC,IAAU,EAAE,EAAE;IAClD,OAAO,IAAI,CAAC,cAAc,EAAE;QAC1B,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,GAAG,CAAC,CAAC;QAC3B,GAAG,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;QACtB,GAAG,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;QACvB,GAAG,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC;QACzB,GAAG,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC;QACzB,CAAC,IAAI,CAAC,kBAAkB,EAAE,GAAG,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;AAC7D,CAAC,CAAA;AAEY,QAAA,uBAAuB,GAAG,EAAE,CAAA;AAC5B,QAAA,sBAAsB,GACjC,0EAA0E,CAAA;AAE/D,QAAA,qBAAqB,GAAG,CAAC,eAAuB,EAAE,EAAE;IAC/D,MAAM,YAAY,GAAG,eAAe,CAAC,OAAO,CAC1C,8BAAsB,EACtB,uBAAuB,CAAC,CAAA;IAE1B,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,YAAY,CAAC,CAAA;IAEnC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE;QACnB,MAAM,IAAI,KAAK,CAAC,cAAc,CAAC,CAAA;KAChC;IAED,OAAO,IAAI,CAAA;AACb,CAAC,CAAA;AAEY,QAAA,qBAAqB,GAAG,CAAC,IAAU,EAAE,EAAE;IAClD,OAAO,IAAI,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,SAAS,EAAE,EAAE,CAAC,CAAA;AAClD,CAAC,CAAA;AAEY,QAAA,sBAAsB,GACjC,2EAA2E,CAAA;AAEhE,QAAA,qBAAqB,GAAG,CAAC,eAAuB,EAAE,EAAE;IAC/D,MAAM,YAAY,GAAG,eAAe,CAAC,OAAO,CAC1C,8BAAsB,EACtB,mBAAmB,CACpB,CAAA;IAED,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,YAAY,CAAC,CAAA;IAEnC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,EAAE;QACnB,MAAM,IAAI,KAAK,CAAC,cAAc,CAAC,CAAA;KAChC;IAED,OAAO,IAAI,CAAA;AACb,CAAC,CAAA","sourcesContent":["// The OER encoding for GeneralizedTime is a variable length octet string\n// containing the ASCII/IA5 representation of a ISO8601 combined date and time\n// in the *basic* format without the \"T\" separator.\n//\n// This is a very roundabout way of saying that GeneralizedTime contains an\n// ISO 8601 timestamp, but compared to JavaScript, we need to take out the\n// hyphens (\"-\"), colons (\":\") and the \"T\".\n\nfunction pad (n: number) {\n  return n < 10\n    ? '0' + n\n    : String(n)\n}\n\nexport const dateToInterledgerTime = (date: Date) => {\n  return date.getUTCFullYear() +\n    pad(date.getUTCMonth() + 1) +\n    pad(date.getUTCDate()) +\n    pad(date.getUTCHours()) +\n    pad(date.getUTCMinutes()) +\n    pad(date.getUTCSeconds()) +\n    (date.getUTCMilliseconds() / 1000).toFixed(3).slice(2, 5)\n}\n\nexport const INTERLEDGER_TIME_LENGTH = 17\nexport const INTERLEDGER_TIME_REGEX =\n  /^([0-9]{4})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{3})$/\n\nexport const interledgerTimeToDate = (interledgerTime: string) => {\n  const isoTimestamp = interledgerTime.replace(\n    INTERLEDGER_TIME_REGEX,\n    '$1-$2-$3T$4:$5:$6.$7Z')\n\n  const date = new Date(isoTimestamp)\n\n  if (!date.valueOf()) {\n    throw new Error('invalid date')\n  }\n\n  return date\n}\n\nexport const dateToGeneralizedTime = (date: Date) => {\n  return date.toISOString().replace(/[\\-T:]/g, '')\n}\n\nexport const GENERALIZED_TIME_REGEX =\n  /^([0-9]{4})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2})([0-9]{2}\\.[0-9]{3}Z)$/\n\nexport const generalizedTimeToDate = (generalizedTime: string) => {\n  const isoTimestamp = generalizedTime.replace(\n    GENERALIZED_TIME_REGEX,\n    '$1-$2-$3T$4:$5:$6'\n  )\n\n  const date = new Date(isoTimestamp)\n\n  if (!date.valueOf()) {\n    throw new Error('invalid date')\n  }\n\n  return date\n}\n"]}